# ğŸ¨ Visual Guide - Member B2 AI/ML Module

A visual walkthrough of how the system works.

## System Architecture

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    SmartCitySense - AI/ML Module             â”ƒ
â”ƒ                        (Member B2)                          â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

                    User Uploads Image/Video
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FastAPI Server                          â”‚
â”‚                    (main.py - Port 8001)                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Vision Endpoints  â”‚         â”‚ Predictive Endpointsâ”‚    â”‚
â”‚  â”‚                    â”‚         â”‚                     â”‚    â”‚
â”‚  â”‚ POST /ai/vision/   â”‚         â”‚ POST /ai/predict/   â”‚    â”‚
â”‚  â”‚      image         â”‚         â”‚      anomaly        â”‚    â”‚
â”‚  â”‚      video         â”‚         â”‚      forecast       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                 â”‚
             â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VISION MODULE         â”‚    â”‚   PREDICTIVE MODULE         â”‚
â”‚   (vision/)             â”‚    â”‚   (predictive/)             â”‚
â”‚                         â”‚    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ImageClassifier  â”‚   â”‚    â”‚  â”‚ AnomalyDetector     â”‚   â”‚
â”‚  â”‚   (YOLOv8)       â”‚   â”‚    â”‚  â”‚ (Isolation Forest)  â”‚   â”‚
â”‚  â”‚                  â”‚   â”‚    â”‚  â”‚                     â”‚   â”‚
â”‚  â”‚  - Object        â”‚   â”‚    â”‚  â”‚  - Statistical      â”‚   â”‚
â”‚  â”‚    detection     â”‚   â”‚    â”‚  â”‚    baseline         â”‚   â”‚
â”‚  â”‚  - Event         â”‚   â”‚    â”‚  â”‚  - ML scoring       â”‚   â”‚
â”‚  â”‚    classificationâ”‚   â”‚    â”‚  â”‚  - Alert generation â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ VideoAnalyzer    â”‚   â”‚    â”‚  â”‚ TimeSeriesForecasterâ”‚   â”‚
â”‚  â”‚   (OpenCV)       â”‚   â”‚    â”‚  â”‚    (Prophet)        â”‚   â”‚
â”‚  â”‚                  â”‚   â”‚    â”‚  â”‚                     â”‚   â”‚
â”‚  â”‚  - Frame         â”‚   â”‚    â”‚  â”‚  - Hourly forecasts â”‚   â”‚
â”‚  â”‚    extraction    â”‚   â”‚    â”‚  â”‚  - Seasonality      â”‚   â”‚
â”‚  â”‚  - Multi-frame   â”‚   â”‚    â”‚  â”‚  - Trend detection  â”‚   â”‚
â”‚  â”‚    aggregation   â”‚   â”‚    â”‚  â”‚  - Confidence bands â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Firebase/Firestore  â”‚
              â”‚                       â”‚
              â”‚  Collections:         â”‚
              â”‚  - events             â”‚
              â”‚  - predictions        â”‚
              â”‚  - alerts             â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Vision Pipeline Flow

```
USER UPLOAD
    â”‚
    â”‚  Uploads image: fallen_tree.jpg
    â”‚  Location: MG Road, Bengaluru
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. RECEIVE & VALIDATE                â”‚
â”‚                                       â”‚
â”‚  - Check file type (JPG/PNG/MP4)     â”‚
â”‚  - Check file size (< 10 MB)         â”‚
â”‚  - Save to temp location              â”‚
â”‚                                       â”‚
â”‚  âœ“ fallen_tree.jpg (2.5 MB, JPG)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. PREPROCESS IMAGE                  â”‚
â”‚                                       â”‚
â”‚  Original: 1920Ã—1080                  â”‚
â”‚       â†“                               â”‚
â”‚  Resize: 640Ã—640                      â”‚
â”‚       â†“                               â”‚
â”‚  Normalize: RGB [0-255] â†’ [0-1]      â”‚
â”‚       â†“                               â”‚
â”‚  Tensor: [1, 3, 640, 640]            â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. YOLO INFERENCE                    â”‚
â”‚                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚  YOLOv8 Model   â”‚               â”‚
â”‚     â”‚  (6 MB, nano)   â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚              â”‚                        â”‚
â”‚     Detections:                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚ tree     : 92% conf        â”‚    â”‚
â”‚     â”‚ road     : 88% conf        â”‚    â”‚
â”‚     â”‚ car      : 75% conf        â”‚    â”‚
â”‚     â”‚ building : 68% conf        â”‚    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. EVENT CLASSIFICATION              â”‚
â”‚                                       â”‚
â”‚  Detected: tree + road + car          â”‚
â”‚       â†“                               â”‚
â”‚  Rule: IF tree ON road                â”‚
â”‚       THEN event = "obstruction"      â”‚
â”‚       â†“                               â”‚
â”‚  Event Type: OBSTRUCTION              â”‚
â”‚  Severity: HIGH                       â”‚
â”‚  Confidence: 0.92                     â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. GENERATE DESCRIPTION              â”‚
â”‚                                       â”‚
â”‚  Template:                            â”‚
â”‚  "Road obstruction - {object}         â”‚
â”‚   blocking path near {location}"      â”‚
â”‚       â†“                               â”‚
â”‚  Output:                              â”‚
â”‚  "Road obstruction - tree blocking    â”‚
â”‚   path near MG Road"                  â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. SAVE TO DATABASE                  â”‚
â”‚                                       â”‚
â”‚  {                                    â”‚
â”‚    "event_type": "obstruction",       â”‚
â”‚    "description": "Road obstruction...",â”‚
â”‚    "confidence": 0.92,                â”‚
â”‚    "severity": "high",                â”‚
â”‚    "location": "MG Road",             â”‚
â”‚    "coordinates": {                   â”‚
â”‚      "lat": 12.9716,                  â”‚
â”‚      "lon": 77.5946                   â”‚
â”‚    },                                 â”‚
â”‚    "timestamp": "2025-10-11T14:30:00Z",â”‚
â”‚    "detected_objects": [...]          â”‚
â”‚  }                                    â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
            Return to User
```

## Anomaly Detection Flow

```
TRIGGER: Background job runs every 5 minutes

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. QUERY RECENT EVENTS               â”‚
â”‚                                       â”‚
â”‚  Time Window: Last 15 minutes         â”‚
â”‚  Location: Whitefield                 â”‚
â”‚  Event Type: power_outage             â”‚
â”‚       â†“                               â”‚
â”‚  Found: 12 events                     â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. CALCULATE BASELINE                â”‚
â”‚                                       â”‚
â”‚  Historical data (last 7 days):       â”‚
â”‚  - Average: 2.3 events/15 min         â”‚
â”‚  - Std Dev: 1.2                       â”‚
â”‚  - Max: 5 events                      â”‚
â”‚       â†“                               â”‚
â”‚  Expected: 2.3 Â± 1.2 events           â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. STATISTICAL ANALYSIS              â”‚
â”‚                                       â”‚
â”‚  Current: 12 events                   â”‚
â”‚  Expected: 2.3 events                 â”‚
â”‚  Ratio: 12 / 2.3 = 5.2x              â”‚
â”‚       â†“                               â”‚
â”‚  Threshold: 2.5x                      â”‚
â”‚  Is Anomaly: YES (5.2 > 2.5)         â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ML SCORING (Isolation Forest)     â”‚
â”‚                                       â”‚
â”‚  Features:                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ event_count    : 12          â”‚     â”‚
â”‚  â”‚ hour_of_day    : 14 (2 PM)  â”‚     â”‚
â”‚  â”‚ day_of_week    : 3 (Wed)    â”‚     â”‚
â”‚  â”‚ location_code  : 15          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â†“                               â”‚
â”‚  Model Output:                        â”‚
â”‚  - Anomaly Score: 0.94                â”‚
â”‚  - Decision: ANOMALY                  â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. GENERATE ALERT                    â”‚
â”‚                                       â”‚
â”‚  {                                    â”‚
â”‚    "alert": "Possible grid outage     â”‚
â”‚             in Whitefield",           â”‚
â”‚    "alert_type": "power_grid_issue",  â”‚
â”‚    "severity": "high",                â”‚
â”‚    "anomaly_score": 0.94,             â”‚
â”‚    "event_count": 12,                 â”‚
â”‚    "baseline": 2.3,                   â”‚
â”‚    "recommendations": [               â”‚
â”‚      "Multiple outage reports",       â”‚
â”‚      "Check transformer status",      â”‚
â”‚      "Estimated: 2-4 hours"           â”‚
â”‚    ],                                 â”‚
â”‚    "affected_areas": [                â”‚
â”‚      "Whitefield", "ITPL"             â”‚
â”‚    ]                                  â”‚
â”‚  }                                    â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        Save Alert & Notify Users
```

## Forecasting Flow

```
REQUEST: Forecast traffic for next 24 hours

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. FETCH HISTORICAL DATA             â”‚
â”‚                                       â”‚
â”‚  Query: Traffic events (last 30 days) â”‚
â”‚       â†“                               â”‚
â”‚  Retrieved: 1,440 hourly data points  â”‚
â”‚  (30 days Ã— 24 hours Ã— 2 events/hr)  â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. PREPARE DATA FOR PROPHET          â”‚
â”‚                                       â”‚
â”‚  Resample to hourly counts:           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Timestamp      â”‚ Event Count â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ 2025-10-01 00h â”‚ 3           â”‚     â”‚
â”‚  â”‚ 2025-10-01 01h â”‚ 2           â”‚     â”‚
â”‚  â”‚ 2025-10-01 02h â”‚ 1           â”‚     â”‚
â”‚  â”‚ ...            â”‚ ...         â”‚     â”‚
â”‚  â”‚ 2025-10-30 23h â”‚ 8           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       â†“                               â”‚
â”‚  Prophet format: ds, y                â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. TRAIN PROPHET MODEL               â”‚
â”‚                                       â”‚
â”‚  Decomposition:                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Trend:                         â”‚   â”‚
â”‚  â”‚   â•±â•²  â•±â•²  â•±â•²                   â”‚   â”‚
â”‚  â”‚  â•±  â•²â•±  â•²â•±  â•²  (Overall up)    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Daily Seasonality:             â”‚   â”‚
â”‚  â”‚   â•±â•²    â•±â•²    â•±â•²               â”‚   â”‚
â”‚  â”‚  â•±  â•²__â•±  â•²__â•±  â•² (24h cycle) â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Weekly Seasonality:            â”‚   â”‚
â”‚  â”‚   ____â•±â•²____â•±â•²____ (7d cycle) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. GENERATE FORECAST                 â”‚
â”‚                                       â”‚
â”‚  Predict next 24 hours:               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Time  â”‚ Predicted â”‚ Lower â”‚ Upperâ”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 15:00 â”‚   12.5    â”‚  8.2  â”‚ 16.8 â”‚  â”‚
â”‚  â”‚ 16:00 â”‚   14.3    â”‚  9.8  â”‚ 18.8 â”‚  â”‚
â”‚  â”‚ 17:00 â”‚   18.7    â”‚ 14.1  â”‚ 23.3 â”‚  â”‚
â”‚  â”‚ 18:00 â”‚   22.4    â”‚ 17.5  â”‚ 27.3 â”‚âš ï¸â”‚
â”‚  â”‚ 19:00 â”‚   15.6    â”‚ 10.9  â”‚ 20.3 â”‚  â”‚
â”‚  â”‚ ...   â”‚   ...     â”‚  ...  â”‚ ...  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†“                               â”‚
â”‚  Peak detected at 18:00 (6 PM)        â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. GENERATE RECOMMENDATIONS          â”‚
â”‚                                       â”‚
â”‚  {                                    â”‚
â”‚    "forecast_results": [...],         â”‚
â”‚    "recommendations": [               â”‚
â”‚      "High traffic predicted at 6 PM",â”‚
â”‚      "Expect 20-25 events",           â”‚
â”‚      "Consider alternative routes"    â”‚
â”‚    ],                                 â”‚
â”‚    "peak_hours": ["18:00", "09:00"], â”‚
â”‚    "confidence": 0.95                 â”‚
â”‚  }                                    â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
            Return to User
```

## Data Schema Visualization

### Event Document (Firebase)

```json
{
  "id": "evt_20251011_143000_abc123",
  
  "event_type": "obstruction",
  "description": "Road obstruction - tree blocking path",
  
  "location": "MG Road, Bengaluru",
  "coordinates": {
    "lat": 12.9716,
    "lon": 77.5946
  },
  
  "timestamp": "2025-10-11T14:30:00Z",
  "created_at": "2025-10-11T14:30:05Z",
  
  "confidence": 0.92,
  "severity": "high",
  
  "detected_objects": [
    {
      "class_name": "tree",
      "confidence": 0.92,
      "bbox": [120, 340, 580, 720]
    },
    {
      "class_name": "road",
      "confidence": 0.88,
      "bbox": [0, 600, 640, 640]
    }
  ],
  
  "tags": ["obstruction", "tree", "road_block"],
  
  "source": "vision_analysis",
  "model_version": "yolov8n",
  "processing_time_ms": 245.3,
  
  "user_id": "user_xyz789",
  "processed": true
}
```

### Alert Document (Firebase)

```json
{
  "id": "alert_20251011_143500_def456",
  
  "alert": "Possible grid outage in Whitefield",
  "alert_type": "power_grid_issue",
  "severity": "high",
  
  "anomaly_result": {
    "is_anomaly": true,
    "anomaly_score": 0.94,
    "event_count": 12,
    "baseline_count": 2.3
  },
  
  "affected_areas": ["Whitefield", "ITPL", "Brookefield"],
  
  "recommendations": [
    "Multiple outage reports in 15 minutes",
    "Likely grid issue - check transformer status",
    "Estimated restoration: 2-4 hours"
  ],
  
  "timestamp": "2025-10-11T14:35:00Z",
  "created_at": "2025-10-11T14:35:02Z",
  
  "acknowledged": false,
  "notified_users": 145,
  
  "source": "predictive_analysis"
}
```

## API Response Examples

### Vision Analysis Response

```json
HTTP/1.1 200 OK
Content-Type: application/json

{
  "event_type": "obstruction",
  "description": "Road obstruction - tree blocking path near MG Road",
  "confidence": 0.92,
  "severity": "high",
  
  "detected_objects": [
    {
      "class_name": "tree",
      "confidence": 0.92,
      "bbox": [120, 340, 580, 720]
    }
  ],
  
  "tags": ["obstruction", "tree", "road_block"],
  
  "timestamp": "2025-10-11T14:30:00Z",
  "processing_time_ms": 245.3,
  "model_version": "yolov8n"
}
```

### Anomaly Detection Response

```json
HTTP/1.1 200 OK
Content-Type: application/json

{
  "alert": "Possible grid outage in Whitefield",
  "alert_type": "power_grid_issue",
  "severity": "high",
  
  "anomaly_result": {
    "is_anomaly": true,
    "anomaly_score": 0.94,
    "event_count": 12,
    "baseline_count": 2.3,
    "severity": "high"
  },
  
  "recommendations": [
    "Multiple outage reports detected in 15 minutes",
    "Likely grid issue - check transformer status",
    "Estimated restoration time: 2-4 hours"
  ],
  
  "affected_areas": ["Whitefield", "ITPL", "Brookefield"],
  
  "timestamp": "2025-10-11T14:35:00Z",
  "processing_time_ms": 156.8
}
```

## Model Performance Visualization

### YOLO Detection Accuracy

```
Precision-Recall Curve:

Precision
    1.0 â”‚         â•±â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚       â•±
        â”‚     â•±
    0.8 â”‚   â•±
        â”‚  â•±
    0.6 â”‚ â•±
        â”‚â•±
    0.4 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Recall
        0.2  0.4  0.6  0.8  1.0

mAP@0.5: 37.3%
mAP@0.5:0.95: 25.7%
```

### Anomaly Detection ROC

```
True Positive Rate
    1.0 â”‚       â•±â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚      â•±
        â”‚     â•±
    0.8 â”‚    â•±
        â”‚   â•±
    0.6 â”‚  â•±
        â”‚ â•±
    0.4 â”‚â•±
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ False Positive Rate
        0.2  0.4  0.6  0.8  1.0

AUC: 0.82
Threshold: 0.85
```

### Forecast Accuracy

```
Actual vs Predicted:

Events
   30 â”‚         â—
      â”‚       â— â—‹ â—
   20 â”‚     â— â—‹   â—‹ â—
      â”‚   â— â—‹       â—‹ â—
   10 â”‚ â— â—‹           â—‹ â—
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Time
        0  4  8  12 16 20 24h

â— = Actual
â—‹ = Predicted

MAE: Â±3.2 events
RMSE: 4.5 events
```

---

**This visual guide provides an intuitive understanding of how the AI/ML module processes data and generates insights.** ğŸ¨
